<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Survey</title>

    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ"
        crossorigin="anonymous">

    <!-- Materialize Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Arvo|Bree+Serif|Kanit" rel="stylesheet">

    <!-- Javascript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="../routing/htmlRoutes.js"></script>
    <script src="../server.js"></script>
    <script src="../data/friends.js"></script>


    <!-- Stylesheet
    <link rel="stylesheet" href="./assets/css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
    Reset
    <link rel="stylesheet" href="assets/css/reset.css">  -->

</head>

<body>
    <div class="row">
        <div class="container">
            <h1>Survey</h1><br>
            <h5>Name (Required)</h5>
            <input id="userName">
            <h5>Link to Photo (Required)</h5>
            <input id="photoLink">

            <form>
                <div class="input-field col l4">
                    <select id="question1" class="browser-default">
                      <option  value="" disabled selected>Select an Answer</option>
                      <option value="1">1 (Strongly Disagree)</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
                <h4>You tend to over-think things</h4><br>


                <div class="input-field col l4">
                    <select id="question2" class="browser-default">
                      <option  value="" disabled selected>Select an Answer</option>
                      <option value="1">1 (Strongly Disagree)</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
                <h4>You are more shy than most people</h4><br>


                <div class="input-field col l4">
                    <select id="question3" class="browser-default">
                      <option  value="" disabled selected>Select an Answer</option>
                      <option value="1">1 (Strongly Disagree)</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
                <h4>Making new friends is easy for you</h4><br>


                <div class="input-field col l4">
                    <select id="question4" class="browser-default">
                      <option  value="" disabled selected>Select an Answer</option>
                      <option value="1">1 (Strongly Disagree)</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
                <h4>You would rather spend the majority of your time with friends instead of being alone</h4><br>


                <div class="input-field col l4">
                    <select d="question5" class="browser-default">
                      <option  value="" disabled selected>Select an Answer</option>
                      <option value="1">1 (Strongly Disagree)</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
                <h4>People say you work too hard and need to relax more</h4><br>


                <div class="input-field col l4">
                    <select id="question6" class="browser-default">
                      <option  value="" disabled selected>Select an Answer</option>
                      <option value="1">1 (Strongly Disagree)</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
                <h4>It doesn't bother you when people don't immediately repy to your text messages</h4><br>


                <div class="input-field col l4">
                    <select id="question7" class="browser-default">
                      <option  value="" disabled selected>Select an Answer</option>
                      <option value="1">1 (Strongly Disagree)</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
                <h4>You are very independent and can take care of yourself</h4><br>


                <div class="input-field col l4">
                    <select id="question8" class="browser-default">
                      <option  value="" disabled selected>Select an Answer</option>
                      <option value="1">1 (Strongly Disagree)</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
                <h4>You would go out of your way to help someone, even if you don't know them well</h4><br>

                <div class="col l3">
                    <button class="z-depth-5 btn waves-effect waves-light grey lighten-0 submit" type="submit" id="submitBtn">
                        <i class="material-icons right">send</i>Submit</button>
                </div>
            </form>

            <div id="results" class="modal">
                <div class="modal-content">
                    <h4>Its a Match!</h4>
                    <h5 id="matchName"></h5>
                    <div id="matchPhoto"></div>
                </div>
                <div class="modal-footer">
                    <a id="resultsClose" class="modal-close waves-effect waves-green btn-flat">close</a>
                </div>
            </div>

        </div>
    </div>
</body>

<script type="text/javascript">

    $(document).ready(function () {
              
        $("#submitBtn").on("click", handleSubmitClick);

    });

    function handleSubmitClick() {

        var results = $("#results");
        var name = $("#userName").val();
        var photo = $("#photoLink").val();
        var questionNum = 8;
        var data;
        var scores;
        var j = 0;

        results.hide();

        if (name == null) {
            alert("You must enter your name!");
            return;
        }

        if (photo == null) {
            alert("You must enter a link to a photo!");
            return;
        }

        for (var i = 1; i < questionNum; i++) {

            if ($("#question" + i).val() == null) {
                console.log($("#question" + i).val());
                alert("please fill out All questions!");
                return;
            }
            else{

                scores[j] = $("#question" + i).val();

                j++;
  
            }
        }

        data = {
            name: name,
            photo: photo,
            scores: scores
        }

	    	var URL = window.location.origin;

            $.post(URL + "/api/friends", data, function(results){

                $("#matchName").text(results.name);
	    		$('#matchPhoto').attr("src", results.photo);
                $('#matchPhoto').attr("height", 200);
                
		    	$("#resultsModal").show();

    });
}

    $("#resultsClose").on("click", function () {
        $("#results").hide();
    });

</script>